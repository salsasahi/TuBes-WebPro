<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Konfirmasi Pemesanan</title>
    <link rel="stylesheet" href="style-detail2.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <header class="navbar">
      <div class="back-section" style="cursor: pointer;" onclick="window.history.back()">
        <i class="bi bi-arrow-left"></i>
        <span>Detail Event</span>
      </div>
      <nav class="nav-links">
        <a href="dashboard_new.html">Dashboard</a>
        <a href="#">Events</a>
        <a href="#">My Events</a>
        <img src="profile.png" alt="User" class="avatar" />
      </nav>
    </header>

    <main class="container">
      <section class="card">
        <div class="section-header">
          <h1>Konfirmasi Pemesanan</h1>
          <h2>Tech Innovation Summit 2024</h2>
          <div class="event-location">
            <strong>Jakarta Convention Center</strong><br />
            Jl. Gatot Subroto, Jakarta Pusat<br />
            <span class="ticket-info">1 Tiket • Pax 1</span>
          </div>
        </div>

        <hr class="divider" />

        <div class="event-date-section">
          <h3>Tanggal Event</h3>
          <p class="event-date">Sab, 8 Nov 2025</p>
          <ul class="event-notes">
            <li>
              <i class="bi bi-x-circle-fill"></i>
              <span>Tidak bisa refund</span>
            </li>
            <li>
              <i class="bi bi-square"></i>
              <span>Tempat duduk bebas</span>
            </li>
            <li>
              <i class="bi bi-calendar-event"></i>
              <span>Berlaku di tanggal terpilih</span>
            </li>
          </ul>
        </div>

        <hr class="divider" />

        <div class="form-section">
          <h3>Detail Pemesanan</h3>
          <form>
            <div class="form-group">
              <label>Nama Lengkap</label>
              <input type="text" placeholder="Nama Lengkap" required />
            </div>

            <div class="form-group">
              <label>Nomor Handphone</label>
              <input type="tel" placeholder="Nomor Handphone" required />
            </div>

            <div class="form-group">
              <label>Jenis Kelamin</label>
              <div class="radio-group">
                <label class="radio-label">
                  <input type="radio" name="gender" value="Laki-Laki" checked />
                  <span>Laki-Laki</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="gender" value="Perempuan" />
                  <span>Perempuan</span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label>Alamat Email</label>
              <input type="email" placeholder="Alamat Email" required />
            </div>
          </form>
        </div>

        <hr class="divider" />

        <div class="price-section">
          <h3>Detail Harga</h3>
          <div class="price-item" id="ticket-price-item">
            <span>Tiket 1 (Pax)</span>
            <span>IDR 40.000</span>
          </div>
          <div class="price-item">
            <span>Biaya Layanan</span>
            <span>IDR 2.000</span>
          </div>
          <hr class="price-divider" />
          <div class="total">
            <span>Total Pembayaran</span>
            <span class="total-amount">IDR 42.000</span>
          </div>
        </div>

        <button class="btn-pesan">Pesan</button>
      </section>
    </main>

    <footer>
      <div class="footer-content">
        <p class="copyright">© 2024 Event Platform. All rights reserved.</p>
      </div>
    </footer>

    <script>
      // Ambil data dari localStorage
      document.addEventListener('DOMContentLoaded', function() {
        const orderData = localStorage.getItem('orderData');
        
        if (orderData) {
          
          const data = JSON.parse(orderData);
          
          // Update judul event
          document.querySelector('.section-header h2').textContent = data.eventName;
          
          // Update lokasi
          const locationDiv = document.querySelector('.event-location');
          locationDiv.innerHTML = `
            <strong>${data.location}</strong><br />
            ${data.address}<br />
            <span class="ticket-info">${data.quantity} Tiket • Pax ${data.quantity}</span>
          `;
          
          // Update tanggal
          document.querySelector('.event-date').textContent = data.date;
          
          // Update harga tiket
          const priceItemTicket = document.querySelector('#ticket-price-item');
          priceItemTicket.innerHTML = `
            <span>Tiket ${data.quantity} (Pax)</span>
            <span>IDR ${(data.pricePerTicket * data.quantity).toLocaleString('id-ID')}</span>
          `;
          
          // Biaya layanan tetap 2.000
          const serviceFee = 2000;
          const totalWithFee = data.totalPrice + serviceFee;
          
          // Update biaya layanan (sudah ada di HTML, tidak perlu diubah)
          
          // Update total
          document.querySelector('.total-amount').textContent = `IDR ${totalWithFee.toLocaleString('id-ID')}`;
        }
        
        // Event listener untuk tombol Pesan
        document.querySelector('.btn-pesan').addEventListener('click', function(e) {
          e.preventDefault();
          
          // Validasi form
          const nama = document.querySelector('input[type="text"]').value;
          const telp = document.querySelector('input[type="tel"]').value;
          const email = document.querySelector('input[type="email"]').value;
          
          if (!nama || !telp || !email) {
            alert('Mohon lengkapi semua data pemesanan!');
            return;
          }
          
          // Validasi email
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(email)) {
            alert('Format email tidak valid!');
            return;
          }
          
          alert('Pemesanan berhasil! Terima kasih telah memesan tiket.');
          
          // Clear localStorage
          localStorage.removeItem('orderData');
          
          // Redirect ke dashboard
          window.location.href = 'dashboard_new.html';
        });
      });
    </script>
  </body>
</html>